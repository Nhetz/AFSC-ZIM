#:import Factory kivy.factory.Factory
#:import MDRoundFlatButton kivymd.uix.button.MDRoundFlatButton
#:import MDRoundFlatIconButton kivymd.uix.button.MDRoundFlatIconButton
#:import MDRectangleFlatIconButton kivymd.uix.button.MDRectangleFlatIconButton
#:import MDDropdownMenu kivymd.uix.menu.MDDropdownMenu

Window:
  Main:
  Admin:
  Users:
  AddTask:
  AddStaff:
  SignUp:
  RV:
  DeleteStaff:
  Surbodinates:
  NewDate:



<SpinnerOptions7@SpinnerOption>
  background_color:1,0,0,1
  color:1,1,1,1

<SpinnerOptions1@SpinnerOption>
  font_size:22
  background_normal:""
  background_color:0,1,0,1
  color:0,0,0,1

<SpinnerOptions@SpinnerOption>

  font_size:22
  background_normal:""
  background_color:0,1,1,1
  color:0,0,0,1

<SpinnerOptions2@SpinnerOption>
  background_color:1,1,1,1
  font_size:26
  color:0,0,0,1
  background_normal:""

<SpinnerOptions3@SpinnerOption>
  background_color:1,1,1,1
  font_size:22
  color:0,0,0,1
  background_normal:""

<SpinnerOptions4@SpinnerOption>
  background_color:1,0,1,1
  color:1,1,1,1

<SpinnerOptions5@SpinnerOption>
  background_color:1,1,0,1
  color:1,1,1,1

<SpinnerOptions6@SpinnerOption>
  background_color:0,0,0,1
  color:1,1,1,1
<Main>:
  name:"main"
  canvas.before:
    Color:
      rgba:1,1,1,1
    Rectangle:
      pos:self.pos
      size:self.size
  GridLayout:
    cols:2
    FloatLayout:
      Image:
        size_hint:0.5,0.2
        pos_hint:{"x":0.2,"y":0.7}
        source:"afsc.png"



      Label:
        text: "UserName"
        size_hint:0.2,0.1
        pos_hint:{"x":0.1,"y":0.5}
        font_size:26
        color:0,0,0,1

      TextInput:
        id:u
        on_text:
          root.manager.user.usertext = self.text
        size_hint:0.2,0.1
        pos_hint:{"x":0.5,"y":0.5}
        font_size:26
        background_color:1,1,1,1



      Label:
        text:"Password"
        size_hint:0.2,0.1
        pos_hint:{"x":0.1, "y":0.3}
        font_size:26
        color:0,0,0,1

      TextInput:
        id:p
        on_text:
          root.manager.user.passtext = self.text
        size_hint:0.2,0.1
        pos_hint:{"x":0.5,"y":0.3}
        font_size:26
        password:True



      MDRoundFlatIconButton:
        text:"LOGIN"
        icon:"login-variant"
        size_hint:0.2,0.1
        pos_hint:{"x": 0.1, "y":0.1}
        font_size:26
        on_release:
          root.manager.transition.direction ="up"
          root.Login()
        md_bg_color:0,1,1,1
        text_color:0,0,0,1
        theme_text_color:"Custom"


      MDRoundFlatIconButton:
        text:"SIGN UP"
        icon:"plus"
        pos_hint:{"x":0.4, "y":0.1}
        size_hint:0.2,0.1
        font_size:26
        on_release:
          app.root.transition.direction ="left"
          app.root.current ="signup"
        md_bg_color:0,0,0,1
        text_color:1,1,1,1


      MDRoundFlatIconButton:
        text:"CLEAR"
        pos_hint:{"x":0.7,"y":0.1}
        size_hint:0.2,0.1
        font_size:26
        on_release:
          u.text =""
          p.text =""
        icon:"delete"
        md_bg_color:1,0,0,1
        text_color:1,1,1,1

        background_color:1,0,0,1


<Users>
  name:"users"
  canvas.before:
    Color:
      rgba:1,1,1,1
    Rectangle:
      pos:self.pos
      size:self.size
  GridLayout:
    cols:2
    FloatLayout:
      Image:
        size_hint:0.5,0.3
        pos_hint:{"x":0.2,"y":0.7}
        source:"afsc.png"

      Label:
        text:root.manager.user.notification
        size_hint:0.4,0.1
        pos_hint:{"x":0.6,"y":0.8}
        font_size:26
        color:1,0,0,1
        on_touch_down:

      Label:
        text:"Welcome"
        size_hint:0.4,0.1
        pos_hint:{"x":0.0,"y":0.8}
        font_size:26
        color:0.41, 0.42, 0.74, 1


      Label:
        text: root.manager.user.usertext
        size_hint:0.4,0.1
        pos_hint:{"x":0.0, "y":0.7}
        font_size:26
        color:0.41,0.42 ,0.74,1

      MDRoundFlatIconButton:
        icon:"eye"
        size_hint:0.3,0.1
        pos_hint:{"x":0.1,"y":0.5}
        text:"View Tasks"
        font_size:26
        on_release:
          app.root.transition.direction ="left"
          app.root.current ="view"
        md_bg_color:0,1,0,1
        text_color:0,0,0,1



      MDRoundFlatIconButton:
        icon:"plus-circle"
        size_hint:0.3,0.1
        pos_hint:{"x":0.6,"y":0.5}
        text:"Add Tasks"
        font_size:26
        on_release:
          app.root.transition.direction ="right"
          app.root.current = "addt"
        md_bg_color:1,0,1,1
        text_color:0,0,0,1


      MDRoundFlatIconButton:
        icon:"logout-variant"
        size_hint:0.3,0.1
        pos_hint:{"x":0.1,"y":0.3}
        text:"LOG OUT"
        font_size:26
        on_release:
          app.root.transition.direction ="down"
          app.root.current ="main"
        md_bg_color:0,0,1,1
        text_color:1,1,1,1

      MDRoundFlatIconButton:
        text:"Refresh"
        icon:"refresh"
        md_bg_color:0,1,1,1
        pos_hint:{"x":0.6,"y":0.3}
        size_hint:0.3,0.1
        font_size:26
        text_color:0,0,0,1


<Admin>
  name:"admin"
  canvas.before:
    Color:
      rgba:1,1,1,1
    Rectangle:
      size:self.size
      pos:self.pos
  GridLayout:
    cols:2

    FloatLayout:
      Label:
        text:"Welcome Admin"
        pos_hint:{"x":0.0,"y":0.8}
        size_hint:0.4,0.1
        font_size:26
        color:1,0,0,1
      Label:
        text:root.manager.user.usertext
        pos_hint:{"x":0.0,"y":0.7}
        size_hint:0.4,0.1
        font_size:26
        color:1,0,0,1

      Label:
        text:root.manager.user.notification
        pos_hint:{"x":0.6,"y":0.7}
        size_hint:0.4,0.1
        font_size:26
        color:1,0,0,1
      Image:
        size_hint:0.5,0.2
        pos_hint:{"x":0.2,"y":0.7}
        source:"afsc.png"
      TabbedPanel:
        do_default_tab: False
        tab_width: root.width / 3
        background_color: 102,255,255,1
        border:[0,0,0,0]
        pos_hint:{"x":0.2,"y":0.3}
        size_hint:0.6,0.3

        TabbedPanelItem:
          text:"Organisational"
          background_color:1,0,1,1
          font_size:26
          size_hint:0.5,0.3
          GridLayout:
            cols:1
            BoxLayout:
              spacing:2
              orientation:"vertical"
              Button:
                text:"Add Staff"
                size_hint:0.5,0.1
                on_release:
                  app.root.current="adds"
                  app.root.transition.direction ="down"
                pos_hint:
                  {"x":0.1,"y":0.9}
                background_color:1,0,1,1
                font_size:26

              Button:
                text:"Delete Staff"
                size_hint:0.5,0.1
                on_release:
                  app.root.current="delete"
                  app.root.transition.direction ="down"
                pos_hint:{"x":0.1,"y":0.8}
                background_color:1,0,1,1
                font_size:26
              Button:
                text:"Surbodinates"
                size_hint:0.5,0.1
                pos_hint:{"x":0.1,"y":0.6}
                background_color:1,0,1,1
                font_size:26
                on_release:
                  app.root.current ="sur"
                  app.root.transition.direction = "up"


        TabbedPanelItem:
          text:"Personal"
          font_size:26
          background_color:1,0,1,1

          size_hint:0.4,0.3
          BoxLayout:
            orientation:"vertical"
            spacing:2
            Button:
              text:"Add Task"
              size_hint:0.5,0.1
              on_release:
                app.root.current="addt"
                app.root.transition.direction ="down"
              pos_hint:{"x":0.6,"y":0.8}
              size_hint:0.4,0.1
              font_size:26
              background_color:1,0,1,1

            Button:
              text:"View Tasks"
              size_hint:0.5,0.1
              on_release:
                app.root.current="view"
                app.root.transition.direction ="down"
              pos_hint:{"x":0.6,"y":0.7}
              size_hint:0.4,0.1
              font_size:26
              background_color:1,0,1,1
      MDRectangleFlatIconButton:
        text:"BACK"
        icon:"arrow-left"
        size_hint:0.3,0.1
        pos_hint:{"x":0.2,"y":0.1}
        font_size:26
        md_bg_color:0,0,0,1
        text_color:1,1,1,1
        theme_text_color:"Custom"

        on_release:
          app.root.current = "main"
          app.root.transition.direction = "down"












<SignUp>
  name:"signup"
  user:user
  pass1:pass1
  pass2:pass2
  canvas.before:
    Color:
      rgba:1,1,1,1
    Rectangle:
      pos:self.pos
      size:self.size
  GridLayout:
    cols:2
    FloatLayout:
      Image:
        size_hint:0.5,0.2
        pos_hint:{"x":0.1,"y":0.8}
        source:"afsc.png"

      Label:
        text:"UserName"
        pos_hint:{"x":0.1,"y":0.7}
        size_hint:0.4,0.1
        font_size:26
        color:0,0,0,1


      TextInput:
        id:user
        pos_hint:{"x":0.5, "y":0.7}
        size_hint:0.2,0.1
        font_size:26
        multiline:False


      Label:
        text:"Password"
        pos_hint:{"x":0.1,"y":0.5}
        size_hint:0.4,0.1
        font_size:26
        color:0,0,0,1

      TextInput:
        id:pass1
        pos_hint:{"x":0.5, "y":0.5}
        size_hint:0.2,0.1
        font_size:26
        multiline:False
        password:True

      Label:
        text:"Password Again"
        pos_hint:{"x":0.1,"y":0.3}
        size_hint:0.4,0.1
        font_size:26
        color:0,0,0,1

      TextInput:
        id:pass2
        pos_hint:{"x":0.5, "y":0.3}
        size_hint:0.2,0.1
        font_size:26
        multiline:False
        password:True

      MDRoundFlatIconButton:
        text: "SUBMIT"
        pos_hint:{"x": 0.3, "y": 0.2}
        size_hint:0.2,0.1
        font_size:26
        on_release:
          root.submit()
        md_bg_color:0,0,0,1
        text_color:1,1,1,1
        icon:"marker-check"

      MDRoundFlatIconButton:
        text:"LOGIN"
        pos_hint:{"x":0.5,"y":0.2}
        size_hint:0.2,0.1
        font_size:26
        on_release:
          app.root.transition.direction ="right"
          app.root.current ="main"
        md_bg_color:1,0,1,1
        text_color:1,1,1,1
        icon:"login-variant"


      MDRoundFlatIconButton:
        text:"CLEAR"
        pos_hint:{"x":0.7,"y":0.2}
        size_hint:0.2,0.1
        font_size:26
        on_release:
          root.clear()
        md_bg_color:1,0,0,1
        icon:"delete"
        text_color:1,1,1,1



<AddTask>
  name:"addt"
  canvas.before:
    Color:
      rgba:1,1,1,1
    Rectangle:
      size:self.size
      pos:self.pos
  GridLayout:
    cols:2
    FloatLayout:
      Image:
        size_hint:0.5,0.2
        pos_hint:{"x":0.3,"y":0.8}
        source:"afsc.png"

      Label:
        text:"TaskName"
        size_hint:0.4,0.1
        pos_hint:{"x":0.0,"y":0.6}
        font_size:26
        color:0,0,0,1

      TextInput:
        id:taskNm
        on_text:
          root.manager.user.taskName = self.text
        size_hint:0.4,0.1
        pos_hint:{"x":0.4,"y":0.6}
        font_size:26


      Label:
        text:"TaskDescription"
        size_hint:0.4,0.1
        pos_hint:{"x":0.0,"y":0.3}
        font_size:26
        color:0,0,0,1


      TextInput:
        id:taskdsr
        on_text:
          root.manager.user.taskdsc =self.text
        size_hint:0.4,0.2
        pos_hint:{"x":0.4,"y":0.3}
        font_size:26
        multipleline:True



      MDRoundFlatIconButton:
        text:'Calendar'
        icon:"calendar"
        pos_hint:{"x":0.1,"y":0.1}
        font_size:26
        theme_text_color:"Custom"
        text_color:1,1,1,1
        size_hint:0.2,0.1
        md_bg_color:0,0,0,1
        icon_bg_color:1,1,1,1

        on_release:
          root.show_date()

      TextInput:
        id:cale
        font_size:26
        pos_hint:{"x":0.4,"y":0.1}
        size_hint:0.2,0.1

      MDRoundFlatIconButton:
        text:"Clear"
        icon:'delete-sweep'
        size_hint:0.2,0.1
        pos_hint:{"x":0.7,"y":0.1}
        font_size:26
        md_bg_color:0,1,0,1
        text_color:0,0,0,1
        theme_text_color:"Custom"
        on_release:
          root.clear()
        border_color:1,0,0,1


      MDRoundFlatIconButton:
        icon:'marker-check'
        size_hint:0.1,0.1
        pos_hint:{"x":0.9,"y":0.6}
        font_size:26
        md_bg_color:0,0,1,1
        text_color:1,1,1,1
        theme_text_color:"Custom"
        on_release:
          root.submit()
        border_color:1,0,0,1

      MDRoundFlatIconButton:
        icon:"arrow-left"
        size_hint:0.1,0.1
        pos_hint:{"x":0.9,"y":0.3}
        font_size:26
        md_bg_color:0,0,0,1
        text_color:1,1,1,1
        theme_text_color:"Custom"
        on_release:
          root.position()
          app.root.current ="admin" if root.manager.user.position =="Admin" else "users"
          app.root.transition.direction ="left"



<AddStaff>
  name:"adds"
  canvas.before:
    Color:
      rgba:1,1,1,1
    Rectangle:
      size:self.size
      pos:self.pos
  GridLayout:
    cols:2
    FloatLayout:
      Image:
        size_hint:0.5,0.2
        pos_hint:{"x":0.1,"y":0.8}
        source:"afsc.png"


      TextInput:
        id:name
        hint_text:"INITIALS"
        pos_hint:{"x":0.3,"y":0.5}
        size_hint:0.2,0.1
        color:0,0,0,1
        font_size:26

      Spinner:
        id:department
        text:"Department"
        size_hint:0.2,0.1
        pos_hint:{"x":0.3,"y":0.3}
        values:{'PO','FA','CR','MEAL'}
        background_color:1,0,1,1
        option_cls:Factory.get("SpinnerOptions4")
        font_size:26

      Spinner:
        id:role
        text:"Role"
        pos_hint:{"x":0.6,"y":0.5}
        values:{"Supervisor","Employee","Intern"}
        background_color:1,1,0,1
        size_hint:0.2,0.1
        option_cls:Factory.get("SpinnerOptions5")
        font_size:26

      Spinner:
        id:gender
        text:"Gender"
        values:{'Male','Female'}
        option_cls:Factory.get("SpinnerOptions6")
        background_color:0,0,0,1
        size_hint:0.2,0.1
        pos_hint:{"x":0.3,"y":0.1}
        font_size:26

      Spinner:
        id:supervisor
        text:"Supervisor"
        background_color:1,0,0,1
        size_hint:0.2,0.1
        pos_hint:{"x":0.6,"y":0.3}
        values:root.supervisor
        option_cls:Factory.get("SpinnerOptions7")
        font_size:26




      FloatLayout:
        pos_hint:{"x":0.0,"y":0.3}
        orientation:"vertical"
        MDRoundFlatIconButton:
          icon:"folder"
          md_bg_color:0,1,1,1
          text_color:0,0,0,1

          size:100,59
          pos_hint:{"x":0.1,"y":0.2}
          on_release:
            root.add()


        MDRoundFlatIconButton:
          icon:"arrow-left"
          size:100,59
          md_bg_color:1,0,0,1
          text_color:0,0,0,1
          on_release:
            root.back()


          pos_hint:{"x":0.1,"y":0.0}

<RV>:
  name:"view"
  canvas.before:
    Color:
      rgba:1,1,1,1
    Rectangle:
      size:self.size
      pos:self.pos
  GridLayout:
    cols:1
    FloatLayout:
      Image:
        size_hint:0.5,0.2
        pos_hint:{"x":0.2,"y":0.8}
        source:"afsc.png"
      RecycleView:
        viewclass: 'TaskLayout'
        size_hint:0.4,0.5
        pos_hint:{"x":0.5,"y":0.3}
        data:[{'text': str(x)} for x in root.staff]
        RecycleBoxLayout:
          default_size: None, dp(50)
          default_size_hint: 1, None
          orientation: 'vertical'
          multiselect:False
          touch_multiselect: False
          size_hint_y: None
          height: self.minimum_height
      Button:
        text:"BACK"
        pos_hint:{"x":0.1,"y":0.1}
        font_size:26
        size_hint:0.2,0.1
        on_release:
          root.clear()
          root.position()
          app.root.current ="admin" if root.manager.user.position =="Admin" else "users"
      Button:
        text:"Refresh"
        pos_hint:{"x":0.1,"y":0.3}
        font_size:26
        background_color:0,1,0,1
        size_hint:0.2,0.1
        on_release:
          root.refresh()
      Label:
        text:"Tasks Pending"
        pos_hint:{"x":0.1,"y":0.6}
        font_size:26
        size_hint:0.2,0.1
        color:1,0,0,1

      Label:
        text:root.manager.user.pending
        pos_hint:{"x":0.1,"y":0.5}
        font_size:26
        size_hint:0.2,0.1
        color:0,0,0,1




<DeleteStaff>
  name:"delete"
  spi:spi
  canvas.before:
    Color:
      rgba:1,1,1,1
    Rectangle:
      size:self.size
      pos:self.pos

  GridLayout:
    cols:2
    FloatLayout:
      Image:
        size_hint:0.4,0.2
        pos_hint:{"x":0.3,"y":0.8}
        source:"afsc.png"

      Label:
        text:"SELECT NAME"
        size_hint:0.4,0.1
        pos_hint:{"x":0.1,"y":0.6}
        color:1,0,0,1
        font_size:26



      Spinner:
        id:spi
        text:"Choose Name"
        values:root.u
        size_hint:0.3,0.1
        pos_hint:{"x":0.5,"y":0.6}
        font_size:26
        background_normal:''
        background_color:1,1,1,1
        option_cls:Factory.get("SpinnerOptions2")
        color:0,0,0,1

      Button:
        text:"DELETE"
        font_size:26
        pos_hint:{"x":0.2,"y":0.4}
        size_hint:0.3,0.1
        background_color:0,0,0,1
        on_release:
          root.delete()

      Button:
        text:"BACK"
        font_size:26
        pos_hint:{"x":0.2,"y":0.3}
        size_hint:0.3,0.1
        background_color:1,1,1,1
        on_release:
          root.back()
          app.root.transition.direction="up"
          app.root.current ="admin"
<TaskLayout>
  btn:btn
  id:btn

<Surbodinates>
  name:"sur"
  canvas.before:
    Color:
      rgba:1,1,1,1
    Rectangle:
      pos:self.pos
      size:self.size
  GridLayout:
    cols:2
    FloatLayout:
      Image:
        size_hint:0.5,0.2
        pos_hint:{"x":0.2,"y":0.8}
        source:"afsc.png"
      RecycleView:
        viewclass: 'SurbodinatesList'
        size_hint:0.4,0.5
        pos_hint:{"x":0.5,"y":0.3}
        data:[{'text': str(x)} for x in root.surbodinates]
        RecycleBoxLayout:
          default_size: None, dp(50)
          default_size_hint: 1, None
          orientation: 'vertical'
          multiselect:False
          touch_multiselect: False
          size_hint_y: None
          height: self.minimum_height

<NewDate>
  name:"new"
  canvas.before:
    Color:
      rgba:1,1,1,1
    Rectangle:
      size:self.size
      pos:self.pos
  GridLayout:
    cols:2
    FloatLayout:
      Button:
        text:"Set New Date"
        font_size:26
        background_color:1,0,0,1
        on_release:
          root.show_date